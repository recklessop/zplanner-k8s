apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-provisioning
  namespace: default
data:
  datasource.yml: |
    apiVersion: 1

    datasources:
      - name: InfluxDB
        type: influxdb
        access: proxy
        url: http://influxdb.default.svc.cluster.local:8086
        database: zplanner
        user: ""
        password: ""
        isDefault: true
        jsonData:
          httpMode: POST
          organization: zplanner
          defaultBucket: zplanner
          token: zplannertoken1234567890
          version: Flux


  dashboards.yml: |
    apiVersion: 1
    providers:
      - name: 'default'
        orgId: 1
        folder: ''
        type: file
        disableDeletion: false
        updateIntervalSeconds: 10
        options:
          path: /etc/grafana/provisioning/dashboards

  dashboard.json: |
    {
      "annotations": {
        "list": []
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 0,
      "id": null,
      "links": [],
      "panels": [],
      "refresh": "5s",
      "schemaVersion": 25,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-6h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "My Dashboard",
      "uid": "abcdefg",
      "version": 1
    }
